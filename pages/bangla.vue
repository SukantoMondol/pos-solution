<template>
  <div class="page-container">
    <div class="header">
      <button class="back-btn" @click="goBack">тЖР Back</button>
      <h1>ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ рж╕рзЗржЯрж┐ржВрж╕</h1>
      <button class="add-btn" @click="showAddModal = true">+ ржирждрзБржи рж╕рзЗржЯрж┐ржВ</button>
    </div>
    
    <div class="content">
      <div class="bangla-section">
        <div class="language-info">
          <div class="info-card">
            <div class="info-icon">ЁЯЗзЁЯЗй</div>
            <div class="info-content">
              <h2>ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ рж╕ржорж░рзНржержи</h2>
              <p>ржЖржкржирж╛рж░ POS рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛рж░ рж╕ржорзНржкрзВрж░рзНржг рж╕ржорж░рзНржержи рж░ржпрж╝рзЗржЫрзЗред ржПржЦрж╛ржирзЗ ржЖржкржирж┐ ржнрж╛рж╖рж╛ рж╕рзЗржЯрж┐ржВрж╕, ржлржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржПржмржВ ржЕржирзБржмрж╛ржж ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред</p>
            </div>
          </div>
        </div>
        
        <div class="settings-grid">
          <div class="setting-card">
            <div class="setting-header">
              <h3>ржнрж╛рж╖рж╛ рж╕рзЗржЯрж┐ржВрж╕</h3>
              <span class="status active">рж╕ржХрзНрж░рж┐ржпрж╝</span>
            </div>
            <div class="setting-content">
              <div class="setting-item">
                <label>ржкрзНрж░рж╛ржержорж┐ржХ ржнрж╛рж╖рж╛</label>
                <select v-model="settings.primaryLanguage">
                  <option value="bn">ржмрж╛ржВрж▓рж╛</option>
                  <option value="en">English</option>
                </select>
              </div>
              <div class="setting-item">
                <label>рж░рж╛ржЗржЯ-ржЯрзБ-рж▓рзЗржлржЯ рж╕ржорж░рзНржержи</label>
                <input type="checkbox" v-model="settings.rtlSupport">
              </div>
              <div class="setting-item">
                <label>рж╕ржВржЦрзНржпрж╛ ржлрж░ржорзНржпрж╛ржЯ</label>
                <select v-model="settings.numberFormat">
                  <option value="bn">ржмрж╛ржВрж▓рж╛ рж╕ржВржЦрзНржпрж╛</option>
                  <option value="en">ржЗржВрж░рзЗржЬрж┐ рж╕ржВржЦрзНржпрж╛</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="setting-card">
            <div class="setting-header">
              <h3>ржлржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h3>
              <span class="status active">рж╕ржХрзНрж░рж┐ржпрж╝</span>
            </div>
            <div class="setting-content">
              <div class="setting-item">
                <label>ржлржирзНржЯ ржкрж░рж┐ржмрж╛рж░</label>
                <select v-model="settings.fontFamily">
                  <option value="kalpurush">ржХрж▓рзНржкрж░рзБрж╢</option>
                  <option value="solaimanlipi">рж╕рзЛрж▓рж╛ржЗржорж╛ржирж▓рж┐ржкрж┐</option>
                  <option value="nikosh">ржирж┐ржХрзЛрж╢</option>
                  <option value="adobe">ржЕрзНржпрж╛ржбрзЛржм</option>
                </select>
              </div>
              <div class="setting-item">
                <label>ржлржирзНржЯ рж╕рж╛ржЗржЬ</label>
                <input type="range" v-model="settings.fontSize" min="12" max="24" class="font-slider">
                <span class="font-size-display">{{ settings.fontSize }}px</span>
              </div>
              <div class="setting-item">
                <label>ржмрзЛрж▓рзНржб ржЯрзЗржХрзНрж╕ржЯ</label>
                <input type="checkbox" v-model="settings.boldText">
              </div>
            </div>
          </div>
          
          <div class="setting-card">
            <div class="setting-header">
              <h3>рждрж╛рж░рж┐ржЦ ржУ рж╕ржоржпрж╝</h3>
              <span class="status active">рж╕ржХрзНрж░рж┐ржпрж╝</span>
            </div>
            <div class="setting-content">
              <div class="setting-item">
                <label>рждрж╛рж░рж┐ржЦ ржлрж░ржорзНржпрж╛ржЯ</label>
                <select v-model="settings.dateFormat">
                  <option value="dd/mm/yyyy">ржжрж┐ржи/ржорж╛рж╕/ржмржЫрж░</option>
                  <option value="mm/dd/yyyy">ржорж╛рж╕/ржжрж┐ржи/ржмржЫрж░</option>
                  <option value="yyyy-mm-dd">ржмржЫрж░-ржорж╛рж╕-ржжрж┐ржи</option>
                </select>
              </div>
              <div class="setting-item">
                <label>рж╕ржоржпрж╝ ржлрж░ржорзНржпрж╛ржЯ</label>
                <select v-model="settings.timeFormat">
                  <option value="12">рззрзи ржШржирзНржЯрж╛ (AM/PM)</option>
                  <option value="24">рзирзк ржШржирзНржЯрж╛</option>
                </select>
              </div>
              <div class="setting-item">
                <label>ржмрж╛ржВрж▓рж╛ ржорж╛рж╕рзЗрж░ ржирж╛ржо</label>
                <input type="checkbox" v-model="settings.bengaliMonthNames">
              </div>
            </div>
          </div>
          
          <div class="setting-card">
            <div class="setting-header">
              <h3>ржорзБржжрзНрж░рж╛ рж╕рзЗржЯрж┐ржВрж╕</h3>
              <span class="status active">рж╕ржХрзНрж░рж┐ржпрж╝</span>
            </div>
            <div class="setting-content">
              <div class="setting-item">
                <label>ржорзБржжрзНрж░рж╛ ржкрзНрж░рждрзАржХ</label>
                <select v-model="settings.currencySymbol">
                  <option value="рз│">рз│ (ржЯрж╛ржХрж╛)</option>
                  <option value="$">$ (ржбрж▓рж╛рж░)</option>
                  <option value="тВ╣">тВ╣ (рж░рзБржкрж┐)</option>
                </select>
              </div>
              <div class="setting-item">
                <label>ржорзБржжрзНрж░рж╛ ржЕржмрж╕рзНржерж╛ржи</label>
                <select v-model="settings.currencyPosition">
                  <option value="before">рж╕ржВржЦрзНржпрж╛рж░ ржЖржЧрзЗ</option>
                  <option value="after">рж╕ржВржЦрзНржпрж╛рж░ ржкрж░рзЗ</option>
                </select>
              </div>
              <div class="setting-item">
                <label>ржмрж╛ржВрж▓рж╛ рж╕ржВржЦрзНржпрж╛ржпрж╝ ржорзБржжрзНрж░рж╛</label>
                <input type="checkbox" v-model="settings.bengaliNumbers">
              </div>
            </div>
          </div>
        </div>
        
        <div class="translation-section">
          <h3>ржЕржирзБржмрж╛ржж ржкрж░рж┐ржЪрж╛рж▓ржирж╛</h3>
          <div class="translation-stats">
            <div class="stat-item">
              <span class="stat-label">ржорзЛржЯ рж╢ржмрзНржж</span>
              <span class="stat-value">{{ translationStats.totalWords }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">ржЕржирзБржмрж╛ржжрж┐ржд</span>
              <span class="stat-value completed">{{ translationStats.translated }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">ржЕржирзБржмрж╛ржж ржмрж╛ржХрж┐</span>
              <span class="stat-value pending">{{ translationStats.pending }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">ржЕржирзБржмрж╛ржж рж╢рждрж╛ржВрж╢</span>
              <span class="stat-value">{{ translationStats.percentage }}%</span>
            </div>
          </div>
          
          <div class="translation-list">
            <div v-for="item in translationItems" :key="item.id" class="translation-item">
              <div class="translation-key">
                <strong>{{ item.key }}</strong>
                <span class="translation-status" :class="item.status">{{ item.status }}</span>
              </div>
              <div class="translation-value">
                <input type="text" v-model="item.value" :placeholder="item.placeholder" class="translation-input">
                <button @click="saveTranslation(item)" class="save-translation-btn">рж╕ржВрж░ржХрзНрж╖ржг</button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="preview-section">
          <h3>ржкрзВрж░рзНржмрж░рзВржк</h3>
          <div class="preview-card">
            <div class="preview-header">
              <h4>POS рж╕рж┐рж╕рзНржЯрзЗржо - ржкрзВрж░рзНржмрж░рзВржк</h4>
              <span class="preview-date">{{ formatDate(new Date()) }}</span>
            </div>
            <div class="preview-content">
              <div class="preview-item">
                <span class="preview-label">ржорзЛржЯ ржмрж┐ржХрзНрж░ржпрж╝:</span>
                <span class="preview-value">{{ formatCurrency(125000) }}</span>
              </div>
              <div class="preview-item">
                <span class="preview-label">ржЖржЬржХрзЗрж░ рж▓рзЗржиржжрзЗржи:</span>
                <span class="preview-value">{{ formatNumber(45) }}ржЯрж┐</span>
              </div>
              <div class="preview-item">
                <span class="preview-label">рж╕рж░рзНржмрж╢рзЗрж╖ ржЖржкржбрзЗржЯ:</span>
                <span class="preview-value">{{ formatTime(new Date()) }}</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="action-buttons">
          <button @click="saveSettings" class="save-btn">рж╕рзЗржЯрж┐ржВрж╕ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button>
          <button @click="resetSettings" class="reset-btn">ржкрзБржирж░рж╛ржпрж╝ рж╕рзЗржЯ ржХрж░рзБржи</button>
          <button @click="exportTranslations" class="export-btn">ржЕржирзБржмрж╛ржж рж░ржкрзНрждрж╛ржирж┐</button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
definePageMeta({
  title: 'ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ рж╕рзЗржЯрж┐ржВрж╕'
})

const settings = ref({
  primaryLanguage: 'bn',
  rtlSupport: false,
  numberFormat: 'bn',
  fontFamily: 'kalpurush',
  fontSize: 16,
  boldText: false,
  dateFormat: 'dd/mm/yyyy',
  timeFormat: '12',
  bengaliMonthNames: true,
  currencySymbol: 'рз│',
  currencyPosition: 'before',
  bengaliNumbers: true
})

const translationStats = ref({
  totalWords: 1250,
  translated: 1100,
  pending: 150,
  percentage: 88
})

const translationItems = ref([
  {
    id: 1,
    key: 'dashboard',
    value: 'ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб',
    placeholder: 'Dashboard',
    status: 'completed'
  },
  {
    id: 2,
    key: 'products',
    value: 'ржкржгрзНржп',
    placeholder: 'Products',
    status: 'completed'
  },
  {
    id: 3,
    key: 'customers',
    value: 'ржЧрзНрж░рж╛рж╣ржХ',
    placeholder: 'Customers',
    status: 'completed'
  },
  {
    id: 4,
    key: 'sales',
    value: 'ржмрж┐ржХрзНрж░ржпрж╝',
    placeholder: 'Sales',
    status: 'completed'
  },
  {
    id: 5,
    key: 'reports',
    value: 'рж░рж┐ржкрзЛрж░рзНржЯ',
    placeholder: 'Reports',
    status: 'pending'
  },
  {
    id: 6,
    key: 'settings',
    value: 'рж╕рзЗржЯрж┐ржВрж╕',
    placeholder: 'Settings',
    status: 'completed'
  },
  {
    id: 7,
    key: 'total_sales',
    value: 'ржорзЛржЯ ржмрж┐ржХрзНрж░ржпрж╝',
    placeholder: 'Total Sales',
    status: 'completed'
  },
  {
    id: 8,
    key: 'add_product',
    value: 'ржкржгрзНржп ржпрзЛржЧ ржХрж░рзБржи',
    placeholder: 'Add Product',
    status: 'pending'
  }
])

const goBack = () => {
  if (process.client) {
    window.location.href = '/'
  }
}

const saveSettings = () => {
  alert('ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ рж╕рзЗржЯрж┐ржВрж╕ рж╕ржлрж▓ржнрж╛ржмрзЗ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ!')
}

const resetSettings = () => {
  if (confirm('ржЖржкржирж┐ ржХрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржпрзЗ ржЖржкржирж┐ рж╕рзЗржЯрж┐ржВрж╕ ржкрзБржирж░рж╛ржпрж╝ рж╕рзЗржЯ ржХрж░рждрзЗ ржЪрж╛ржи?')) {
    // Reset to default values
    settings.value = {
      primaryLanguage: 'bn',
      rtlSupport: false,
      numberFormat: 'bn',
      fontFamily: 'kalpurush',
      fontSize: 16,
      boldText: false,
      dateFormat: 'dd/mm/yyyy',
      timeFormat: '12',
      bengaliMonthNames: true,
      currencySymbol: 'рз│',
      currencyPosition: 'before',
      bengaliNumbers: true
    }
    alert('рж╕рзЗржЯрж┐ржВрж╕ ржкрзБржирж░рж╛ржпрж╝ рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ!')
  }
}

const saveTranslation = (item: any) => {
  item.status = 'completed'
  alert(`"${item.key}" ржПрж░ ржЕржирзБржмрж╛ржж рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ!`)
}

const exportTranslations = () => {
  alert('ржЕржирзБржмрж╛ржж ржлрж╛ржЗрж▓ рж░ржкрзНрждрж╛ржирж┐ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...')
}

const formatDate = (date: Date) => {
  const options: Intl.DateTimeFormatOptions = {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    weekday: 'long'
  }
  
  if (settings.value.bengaliMonthNames) {
    const bengaliMonths = [
      'ржЬрж╛ржирзБржпрж╝рж╛рж░рж┐', 'ржлрзЗржмрзНрж░рзБржпрж╝рж╛рж░рж┐', 'ржорж╛рж░рзНржЪ', 'ржПржкрзНрж░рж┐рж▓', 'ржорзЗ', 'ржЬрзБржи',
      'ржЬрзБрж▓рж╛ржЗ', 'ржЖржЧрж╕рзНржЯ', 'рж╕рзЗржкрзНржЯрзЗржорзНржмрж░', 'ржЕржХрзНржЯрзЛржмрж░', 'ржиржнрзЗржорзНржмрж░', 'ржбрж┐рж╕рзЗржорзНржмрж░'
    ]
    const bengaliDays = ['рж░ржмрж┐ржмрж╛рж░', 'рж╕рзЛржоржмрж╛рж░', 'ржоржЩрзНржЧрж▓ржмрж╛рж░', 'ржмрзБржзржмрж╛рж░', 'ржмрзГрж╣рж╕рзНржкрждрж┐ржмрж╛рж░', 'рж╢рзБржХрзНрж░ржмрж╛рж░', 'рж╢ржирж┐ржмрж╛рж░']
    
    const day = bengaliDays[date.getDay()]
    const month = bengaliMonths[date.getMonth()]
    const year = settings.value.bengaliNumbers ? 
      date.getFullYear().toString().replace(/\d/g, (d) => 'рзжрззрзирзйрзкрзлрзмрзнрзорзп'[parseInt(d)]) :
      date.getFullYear().toString()
    
    return `${day}, ${date.getDate()} ${month} ${year}`
  }
  
  return date.toLocaleDateString('bn-BD', options)
}

const formatTime = (date: Date) => {
  const hours = date.getHours()
  const minutes = date.getMinutes()
  
  if (settings.value.timeFormat === '12') {
    const ampm = hours >= 12 ? 'PM' : 'AM'
    const displayHours = hours % 12 || 12
    return `${displayHours}:${minutes.toString().padStart(2, '0')} ${ampm}`
  }
  
  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`
}

const formatCurrency = (amount: number) => {
  const formattedAmount = settings.value.bengaliNumbers ? 
    amount.toString().replace(/\d/g, (d) => 'рзжрззрзирзйрзкрзлрзмрзнрзорзп'[parseInt(d)]) :
    amount.toLocaleString()
  
  if (settings.value.currencyPosition === 'before') {
    return `${settings.value.currencySymbol} ${formattedAmount}`
  } else {
    return `${formattedAmount} ${settings.value.currencySymbol}`
  }
}

const formatNumber = (num: number) => {
  return settings.value.bengaliNumbers ? 
    num.toString().replace(/\d/g, (d) => 'рзжрззрзирзйрзкрзлрзмрзнрзорзп'[parseInt(d)]) :
    num.toString()
}
</script>

<style scoped>
.page-container {
  padding: 20px;
  max-width: 1200px;
  margin: 0 auto;
  font-family: 'Kalpurush', 'SolaimanLipi', 'Nikosh', sans-serif;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
}

.back-btn {
  background: #6c757d;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
}

.add-btn {
  background: #007bff;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
}

.content {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.language-info {
  margin-bottom: 30px;
}

.info-card {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 30px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 20px;
}

.info-icon {
  font-size: 48px;
}

.info-content h2 {
  margin: 0 0 10px 0;
  font-size: 24px;
}

.info-content p {
  margin: 0;
  font-size: 16px;
  line-height: 1.6;
}

.settings-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.setting-card {
  background: #f8f9fa;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 20px;
}

.setting-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.setting-header h3 {
  margin: 0;
  color: #333;
  font-size: 18px;
}

.status {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: bold;
  text-transform: uppercase;
}

.status.active {
  background: #d4edda;
  color: #155724;
}

.setting-item {
  margin-bottom: 15px;
}

.setting-item label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
  color: #333;
}

.setting-item input,
.setting-item select {
  width: 100%;
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.font-slider {
  width: 100%;
  margin: 10px 0;
}

.font-size-display {
  font-weight: bold;
  color: #007bff;
  margin-left: 10px;
}

.translation-section {
  margin-bottom: 30px;
}

.translation-section h3 {
  margin-bottom: 20px;
  color: #333;
}

.translation-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 15px;
  margin-bottom: 20px;
}

.stat-item {
  background: #f8f9fa;
  padding: 15px;
  border-radius: 8px;
  text-align: center;
  border: 1px solid #ddd;
}

.stat-label {
  display: block;
  font-size: 14px;
  color: #666;
  margin-bottom: 5px;
}

.stat-value {
  font-size: 24px;
  font-weight: bold;
  color: #007bff;
}

.stat-value.completed {
  color: #28a745;
}

.stat-value.pending {
  color: #ffc107;
}

.translation-list {
  background: white;
  border: 1px solid #ddd;
  border-radius: 8px;
  overflow: hidden;
}

.translation-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px;
  border-bottom: 1px solid #ddd;
}

.translation-item:last-child {
  border-bottom: none;
}

.translation-key {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 10px;
}

.translation-key strong {
  color: #333;
}

.translation-status {
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 10px;
  font-weight: bold;
  text-transform: uppercase;
}

.translation-status.completed {
  background: #d4edda;
  color: #155724;
}

.translation-status.pending {
  background: #fff3cd;
  color: #856404;
}

.translation-value {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 2;
}

.translation-input {
  flex: 1;
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.save-translation-btn {
  background: #28a745;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
}

.preview-section {
  margin-bottom: 30px;
}

.preview-section h3 {
  margin-bottom: 20px;
  color: #333;
}

.preview-card {
  background: #f8f9fa;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 20px;
}

.preview-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px solid #ddd;
}

.preview-header h4 {
  margin: 0;
  color: #333;
}

.preview-date {
  color: #666;
  font-size: 14px;
}

.preview-content {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.preview-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.preview-label {
  font-weight: bold;
  color: #333;
}

.preview-value {
  color: #007bff;
  font-weight: bold;
}

.action-buttons {
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}

.save-btn,
.reset-btn,
.export-btn {
  padding: 12px 24px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
}

.save-btn {
  background: #28a745;
  color: white;
}

.reset-btn {
  background: #ffc107;
  color: #212529;
}

.export-btn {
  background: #17a2b8;
  color: white;
}

@media (max-width: 768px) {
  .settings-grid {
    grid-template-columns: 1fr;
  }
  
  .translation-stats {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .translation-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .translation-value {
    width: 100%;
  }
  
  .action-buttons {
    flex-direction: column;
  }
}
</style>

